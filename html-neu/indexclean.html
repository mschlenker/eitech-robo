<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
	<title>Eitech Robby</title>
	<style>
* {
	box-sizing: border-box;
}

body {
	-webkit-user-select: none !important;
	user-select: none !important;
	font-size: 24px; 
	font-family: sans-serif; 
}

form input {
	font-size: 24px; 
	font-family: sans-serif; 
}

.sliderbox {
	font-size: 12px; 
	font-family: sans-serif; 
}

#scrollme, #controlbox, #bottombox, #settingsbox {
	display: none; 
}

#rotate {
	display: block; 
	background-color: whitesmoke;
	height: 100vh;
	width: 100vw;
	position: relative;
	padding: 0px;
	font-family: sans-serif;
	font-weight: bold; 
}

#rotate .inner, #scrollme .inner {
	margin: 0;
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	text-align: center; 
	font-size: 24px; 	
}

/* kleine Tablets, grosse Smartphones */

@media (max-device-width: 1024px) and (orientation: landscape) {

	#rotate {
		display: none; 
	}

	#settingsbox {
		padding-bottom: 90px;
	}

	#scrollme {
		display: block;
		position: relative;
		top: 0;
		left: 0;
		width: calc(100vw - 2px);
		height: 100vh; 
		padding: 0px;
		font-family: sans-serif;
		font-weight: bold; 
		font-size: 16px; 
	}

	#opensettings {
		display: block;
		position: absolute;
		top: 0;
		right: 5px;
		z-index: 100; 
	}
	
	#logoeitech{
		display: block;
		position: absolute;
		top: 5px;
		left: 5px;
		z-index: 100; 
	}
	
	
	#controlbox {
		display: block; 
		position: -webkit-sticky;
		position: sticky;
		top: -1px;
		width: calc(100vw - 6px);
		height: 99vh; 
		z-index: 50; 
	}

	#bottombox {
		display: block; 
		position: relative;
		width: calc(100vw - 2px);
		height: 400vh;
	}
	
	#slidersleft, #slidersright {
		display: block; 
		position: absolute;
		height: 99vh;
	}
	
	#slidersleft {
		position: absolute;
		left: 0;
		top: calc(50vh - 125px); 
	}
	
	#slidersright {
		display: none; 
		position: absolute;
		right: 0;
		top: calc(50vh - 125px); 
	}
	
	#crosscontrols {
		display: block; 
		position: absolute;
		right: 0;
		top: calc(50vh - 125px); 
		width: 252px;
		height: 252px; 
	}
	
	#buttonup {
		display: block; 
		position: absolute;
		left: 84px;
		top: 0px;
		z-index: 100;
	}
	
	#buttondown {
		display: block; 
		position: absolute;
		left: 84px;
		bottom: 0px;
		z-index: 100;
	}
	
	#buttonleft {
		display: block; 
		position: absolute;
		left: 0px;
		top: 82px;
		z-index: 100;
	}
	
	#buttonright {
		display: block; 
		position: absolute;
		right: 0px;
		top: 82px;
		z-index: 100;
	}
	
	#centerpanel {
		display: block; 
		position: absolute;
		right: 84px;
		top: 82px;
		z-index: 90;
	}
	
	#directionpanel {
		display: block; 
		position: absolute;
		left: 84px;
		top: 82px;
		z-index: 92;
		width: 84px;
		height: 84px; 
	}
	
	#directionindicator {
		display: block; 
		position: absolute;
		bottom: 38px;
		left: 38px;
		height: 8px;
		width: 8px;
		/* z-index: 94; */
		background-color: black;
	}
	
	#stopbutton {
		display: block; 
		position: absolute;
		left: 84px;
		top: 110px;
		z-index: 200;
		width: 84px;
		text-align: center;
		color: white;
		font-weight: bold;
		font-size: 24px;
	}
	
	div.sliderbox {
		-webkit-user-select: none !important;
		user-select: none !important;
		position: relative;
		z-index: 10; 
		width: 84px;
		height: 250px;
		padding: 0;
		margin: 0;
		margin-left: 3px; 
		margin-right: 3px; 
		float: left;
		/* border-style: solid;
		border-width: 1px;
		border-color: green; */
	}
	.arrowupbox {
		display: block; 
		position: absolute;
		top: 0;
		left: 0; 
		z-index: 100;
		height: 80px;
		width: 84px; 
		/* touch-action: none; */
		-webkit-user-select: none !important;
		user-select: none !important;
	}
	.arrowdownbox {
		display: block; 
		position: absolute;
		bottom: 0;
		left: 0; 
		z-index: 100; 
		height: 80px;
		width: 84px; 
		/* touch-action: none; */
		-webkit-user-select: none !important;
		user-select: none !important;
	}
	/* .arrowup, .arrowdown {
		touch-action: none;
	} */ 
	.sliderbg {
		display: none; 
		position: absolute;
		top: 15px;
		left: 28px; 
		z-index: 70; 
		height: 220px;
		width: 28px;
		background-color: lightgray; 
	}
	.slider {
		display: block; 
		position: absolute;
		top: 85px;
		left: 0px; 
		z-index: 150; 
		height: 80px;
		width: 84px;
		text-align: center; 
	}
	.stop {
		display: block; 
		position: absolute;
		top: 106px;
		left: 10px; 
		z-index: 180; 
		height: 40px;
		width: 64px;
		text-align: center; 
		color : white;
		font-size: 16px;
		font-weight: bold; 
		padding-top: 10px; 
	}
	.sliderindicator {
		display: block;
		position: absolute;
		bottom: 78px;
		left: 0px; 
		height: 8px;
		width: 84px;
		z-index: 98; 
		background-color: black; 
	}
	
	p.close {
		text-align: right; 
		font-weight: bold; 
	}
	
	.closecontainer {
		display: block; 
		position: absolute;
		top: 5px;
		right: 5px; 
		z-index: 180; 
	}
	
	.safecontainer {
		display: block; 
		position: absolute;
		top: 5px;
		right: 95px; 
		z-index: 180; 
	}
	
}
	</style>
	<script>
	
var upTimer = null; 
var crossTimer = null; 
var sendTimer = null;
var lastSendTime = 0;
var transmitInterval = 100; // 100ms interval, don't send too often
var joyStick = 'caterpillar';
	
var crosscontrol = {
	speed : 0.0,
	angle : 0.0,
	up : 0,
	down : 0,
	left : 0,
	right : 0,
	stephorizontal : 0.05,
	stepvertical : 0.05 
};
	
var loc = {
	"en" : {
		welcome : "Welcome to Eitech Robotics!",
		rotate : "Please switch to landscape mode.",
		scroll : "Scroll down until the controls stay fixed.",
	},
	"de" : {
		welcome : "Willkommen bei Eitech Robotics!",
		rotate : "Bitte drehen Sie ins Querformat.",
		scroll : "Scrollen Sie herunter, bis die Regler ihre Position behalten.",
	}
}
	
var sliders = {
	s : [
		{ 	name : "sliders1",
			text : "Servo L",
			type: "servo",
			start : 0,
			end: 180,
			pos : 90,
			def : 90,
			step : 15,
			up : 0,
			down : 0,
			invert : 1.0,
			center : "Neutral",
			cc : "black",
			display : "block" },
		{ 	name : "sliders2",
			text : "Servo R",
			type: "servo",
			start : 0,
			end: 180,
			pos : 90,
			def : 90,
			step : 15,
			up : 0,
			down : 0,
			invert : 1.0,
			center : "Neutral",
			cc : "black",
			display : "block" },
		{ 	name : "sliderm1",
			text : "Motor 1",
			type: "motor",
			start : -255,
			end: 255,
			pos : 0,
			def : 0,
			step : 16,
			up : 0,
			down : 0,
			invert : 1.0,
			center : "STOP",
			cc : "red",
			display : "block" },
		{ 	name : "sliderm3",
			text : "Motor 3",
			type: "motor",
			start : -255,
			end: 255,
			pos : 0,
			def : 0,
			step : 16,
			up : 0,
			down : 0,
			invert : 1.0,
			center : "STOP",
			cc : "red",
			display : "block" },
		{ 	name : "sliderm2",
			text : "Motor 2",
			type: "motor",
			start : -255,
			end: 255,
			pos : 0,
			def : 0,
			step : 255,
			up : 0,
			down : 0,
			invert : 1.0,
			center : "STOP",
			cc : "red",
			display : "none" },
		{ 	name : "sliderm4",
			text : "Motor 4",
			type: "motor",
			start : -255,
			end: 255,
			pos : 0,
			def : 0,
			step : 16,
			up : 0,
			down : 0,
			invert : 1.0,
			center : "STOP",
			cc : "red",
			display : "none" },
		{ 	name : "slidersw1",
			text : "Switch 1",
			type: "motor",
			start : 0,
			end: 255,
			pos : 0,
			def : 0,
			step : 16,
			up : 0,
			down : 0,
			invert : 1.0,
			center : "STOP",
			cc : "red",
			display : "block" }
	]
};

function wireTouch() {
	localize();
	showUnshowSliders(); 
	var upArrows = document.getElementsByClassName("arrowup");
	var downArrows = document.getElementsByClassName("arrowdown");
	for (var i=0; i<upArrows.length; i++) { drawArrowUp(upArrows[i]); }
	for (var j=0; j<downArrows.length; j++) { drawArrowDown(downArrows[j]); }
	drawArrowRight(document.getElementsByClassName("arrowright")[0]); 
	drawArrowLeft(document.getElementsByClassName("arrowleft")[0]); 
	drawGear();
	drawClose();
	drawCircle();
	drawDisk();
	getPosUp();
	getPosDown();
	getPosCross(); 
	wireCenter();
	wireStop();
	wireOrientation();
	showSettings();
	if(!upTimer) upTimer = setInterval(countUp, 100); 
	console.log(navigator.language); 
}

function localize() {
	var lang = navigator.language;
	if (!loc[lang]) { lang = "en"; }
	var welcome = document.getElementById("scrollme").getElementsByClassName("inner")[0];
	var rotate = document.getElementById("rotate").getElementsByClassName("inner")[0];
	// console.log(loc["de"].welcome);
	welcome.appendChild(document.createTextNode(loc[lang].welcome));
	welcome.appendChild(document.createElement("br"));
	welcome.appendChild(document.createElement("br"));
	welcome.appendChild(document.createTextNode(loc[lang].scroll));
	rotate.appendChild(document.createTextNode(loc[lang].welcome));
	rotate.appendChild(document.createElement("br"));
	rotate.appendChild(document.createElement("br"));
	rotate.appendChild(document.createTextNode(loc[lang].rotate));
}

function showUnshowSliders() {
	var sliderboxes = document.getElementsByClassName("sliderbox");
	for (var i=0; i<sliderboxes.length; i++) {
		var id = sliderboxes[i].getElementsByClassName("slider")[0].getAttribute("id");
		for (var j=0; j<sliders.s.length; j++) {
			if (sliders.s[j].name === id) {
				sliderboxes[i].style.display = sliders.s[j].display;
				sliderboxes[i].getElementsByClassName("stop")[0].innerHTML = sliders.s[j].center;
				sliderboxes[i].getElementsByClassName("stop")[0].style.backgroundColor = sliders.s[j].cc;
				sliderboxes[i].getElementsByClassName("slider")[0].innerHTML = sliders.s[j].text;
			}
		}
	}
}

function showSettings() {
	var setbutton = document.getElementById("opensettings");
	var closebutton = document.getElementsByClassName('closeicon')[0].parentElement; 
	var savebutton = document.getElementsByClassName('diskette')[0].parentElement; 
	setbutton.addEventListener('click', function(e) {
		for (var j=0; j<sliders.s.length; j++) {
			sliders.s[j].pos = sliders.s[j].def; 
		}
		crosscontrol.angle = 0.0;
		crosscontrol.speed = 0.0; 
		var unshow = [ "rotate", "scrollme", "controlbox", "bottombox" ];
		for (var i=0; i<sliders.length; i++) sliders[i].s.pos =  sliders[i].s.def;
		for (var i=0; i<unshow.length; i++) document.getElementById(unshow[i]).style.display = "none";
		document.getElementById("settingsbox").style.display = "block"; 
	}, false);
	closebutton.addEventListener('click', function(e) {
		var unshow = [ "rotate", "settingsbox" ];
		var show = [ "scrollme", "controlbox", "bottombox" ];
		for (var i=0; i<unshow.length; i++) document.getElementById(unshow[i]).style.display = "none";
		for (var i=0; i<show.length; i++) document.getElementById(show[i]).style.display = "block";
	}, false);
	savebutton.addEventListener('click', function(e) {
		console.log("Save settings"); 
	}, false);
}

function drawCircle() {
	var canvas = document.getElementById('drawjoystick');
	var context = canvas.getContext('2d');
	var centerX = canvas.width / 2;
	var centerY = canvas.height / 2;
	var radius = canvas.width / 2 - 1;
	context.beginPath();
	context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
	context.fillStyle = 'red';
	context.fill();
	context.lineWidth = 1;
	context.strokeStyle = 'gray';
	context.stroke();
}

function drawClose() {
	var canvas = document.getElementsByClassName('closeicon')[0];
	var context = canvas.getContext('2d');
	var centerX = canvas.width / 2;
	var centerY = canvas.height / 2;
	var radius = canvas.width / 2 - 1;
	context.beginPath();
	context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
	context.moveTo(42, 28);
	context.lineTo(56, 14);
	context.lineTo(70, 28);
	context.lineTo(56, 42);
	context.lineTo(70, 56);
	context.lineTo(70, 56);
	context.lineTo(56, 70);
	context.lineTo(42, 56);
	context.lineTo(28, 70);
	context.lineTo(14, 56);
	context.lineTo(28, 42);
	context.lineTo(14, 28);
	context.lineTo(28, 14);
	context.closePath();
	
	context.fillStyle = 'red';
	context.fill("evenodd");
	context.lineWidth = 1;
	context.strokeStyle = 'black';
	context.stroke();
}

function drawDisk() {
	var canvas = document.getElementsByClassName('diskette')[0];
	var ctx = canvas.getContext('2d');
	ctx.beginPath();
	ctx.moveTo(69, 0);
	ctx.lineTo(84, 15);
	ctx.lineTo(84, 74);
	ctx.quadraticCurveTo(84, 84, 74, 84);
	ctx.lineTo(10, 84);
	ctx.quadraticCurveTo(0, 84, 0, 74);
	ctx.lineTo(0, 10);
	ctx.quadraticCurveTo(0, 0, 10, 0);
	ctx.closePath();
	ctx.fillStyle = '#353535';
	ctx.fill();
	ctx.lineWidth = 1;
	ctx.strokeStyle = 'black';
	ctx.stroke();
	
	// slider
	ctx.beginPath();
	ctx.moveTo(13, 4);
	ctx.lineTo(58, 4);
	ctx.lineTo(58, 20);
	ctx.quadraticCurveTo(58, 26, 52, 26);
	ctx.lineTo(19, 26);
	ctx.quadraticCurveTo(13, 26, 13, 20);
	ctx.closePath();
	ctx.fillStyle = 'white';
	ctx.fill();
	ctx.lineWidth = 1;
	ctx.strokeStyle = 'black';
	ctx.stroke();
	
	// hole in slider
	ctx.beginPath();
	ctx.moveTo(52, 8);
	ctx.lineTo(52, 22);
	ctx.lineTo(42, 22);
	ctx.lineTo(42, 8);
	ctx.closePath();
	ctx.fillStyle = '#353535';
	ctx.fill();
	ctx.lineWidth = 1;
	ctx.strokeStyle = 'black';
	ctx.stroke();
	
	// label 
	ctx.beginPath();
	ctx.moveTo(13, 81);
	ctx.lineTo(71, 81);
	ctx.lineTo(71, 69);
	ctx.lineTo(13, 69);
	ctx.closePath();
	ctx.fillStyle = 'white';
	ctx.fill();
	ctx.lineWidth = 1;
	ctx.strokeStyle = 'black';
	ctx.stroke();
	
	ctx.beginPath();
	ctx.moveTo(13, 67);
	ctx.lineTo(71, 67);
	ctx.lineTo(71, 55);
	ctx.lineTo(13, 55);
	ctx.closePath();
	ctx.fillStyle = 'white';
	ctx.fill();
	ctx.lineWidth = 1;
	ctx.strokeStyle = 'black';
	ctx.stroke();
	
	ctx.beginPath();
	ctx.moveTo(13, 53);
	ctx.lineTo(71, 53);
	ctx.lineTo(71, 41);
	ctx.lineTo(13, 41);
	ctx.closePath();
	ctx.fillStyle = 'white';
	ctx.fill();
	ctx.lineWidth = 1;
	ctx.strokeStyle = 'black';
	ctx.stroke();
	
}

function drawArrowUp(canvas) {
	var context = canvas.getContext("2d");
	context.beginPath();
	context.moveTo(2, 76);
	context.lineTo(82, 76);
	context.lineTo(82, 32);
	context.lineTo(42, 2);
	context.lineTo(2, 32);
	context.closePath();
	context.lineWidth = 2;
	context.strokeStyle = '#666666';
	context.stroke();
	context.fillStyle = "lightgray";
	context.fill();
}

function drawArrowDown(canvas) {
	var context = canvas.getContext("2d");
	context.beginPath();
	context.moveTo(2, 2);
	context.lineTo(82, 2);
	context.lineTo(82, 52);
	context.lineTo(42, 76);
	context.lineTo(2, 52);
	context.closePath();
	context.lineWidth = 2;
	context.strokeStyle = '#666666';
	context.stroke();
	context.fillStyle = "lightgray";
	context.fill();
}

function drawArrowRight(canvas) {
	var context = canvas.getContext("2d");
	context.beginPath();
	context.moveTo(2, 2);
	context.lineTo(52, 2);
	context.lineTo(76, 42);
	context.lineTo(52, 82);
	context.lineTo(2, 82);
	context.closePath();
	context.lineWidth = 2;
	context.strokeStyle = '#666666';
	context.stroke();
	context.fillStyle = "lightgray";
	context.fill();
}

function drawArrowLeft(canvas) {
	var context = canvas.getContext("2d");
	context.beginPath();
	context.moveTo(76, 2);
	context.lineTo(76, 82);
	context.lineTo(32, 82);
	context.lineTo(2, 42);
	context.lineTo(32, 2);
	context.closePath();
	context.lineWidth = 2;
	context.strokeStyle = '#666666';
	context.stroke();
	context.fillStyle = "lightgray";
	context.fill();
}

function getPosUp() {
	var sliderboxes = document.getElementsByClassName("sliderbox");
	for (var i=0; i<sliderboxes.length; i++) {
		var up = sliderboxes[i].getElementsByClassName("arrowupbox")[0]; 
		up.addEventListener('touchstart', function(e) { 
			e.preventDefault();
			var id = this.parentElement.getElementsByClassName("slider")[0].getAttribute("id");
			var tbox = this.parentElement.getElementsByClassName("slider")[0]; 
			for (var j=0; j<sliders.s.length; j++) {
				if (sliders.s[j].name === id) {
					sliders.s[j].pos = sliders.s[j].pos + sliders.s[j].step;
					if (sliders.s[j].pos > sliders.s[j].end) sliders.s[j].pos = sliders.s[j].end; 
					console.log(sliders.s[j].name + " " + sliders.s[j].pos); 
					sliders.s[j].up = 1;
					// tbox.innerHTML =  sliders.s[j].text + " " + sliders.s[j].pos + " " + sliders.s[j].center;
				}
			}
			if(!upTimer) upTimer = setInterval(countUp, 100); 
			if(!sendTimer) sendTimer = setInterval(sendToServer, 300); 
		}, false);
		up.addEventListener('touchend', function(e) { 
			e.preventDefault();
			var id = this.parentElement.getElementsByClassName("slider")[0].getAttribute("id");
			for (var j=0; j<sliders.s.length; j++) {
				if (sliders.s[j].name === id) {
					sliders.s[j].up = 0;
				}
			}
			if(!sendTimer) sendTimer = setInterval(sendToServer, 300); 
		}, false); 
	}
}

function getPosDown() {
	var sliderboxes = document.getElementsByClassName("sliderbox");
	for (var i=0; i<sliderboxes.length; i++) {
		var dwn = sliderboxes[i].getElementsByClassName("arrowdownbox")[0]; 
		dwn.addEventListener('touchstart', function(e) { 
			e.preventDefault();
			// console.log(this); 
			var id = this.parentElement.getElementsByClassName("slider")[0].getAttribute("id");
			var tbox = this.parentElement.getElementsByClassName("slider")[0]; 
			console.log(id); 
			for (var j=0; j<sliders.s.length; j++) {
				if (sliders.s[j].name === id) {
					sliders.s[j].pos = sliders.s[j].pos - sliders.s[j].step;
					if (sliders.s[j].pos < sliders.s[j].start) sliders.s[j].pos = sliders.s[j].start; 
					console.log(sliders.s[j].name + " " + sliders.s[j].pos);
					sliders.s[j].down = 1;
					// tbox.innerHTML =  sliders.s[j].text + " " + sliders.s[j].pos + " " + sliders.s[j].center ;
				}
			}
			if(!upTimer) upTimer = setInterval(countUp, 100); 
			if(!sendTimer) sendTimer = setInterval(sendToServer, 300); 
		}, false);
		dwn.addEventListener('touchend', function(e) { 
			e.preventDefault();
			var id = this.parentElement.getElementsByClassName("slider")[0].getAttribute("id");
			for (var j=0; j<sliders.s.length; j++) {
				if (sliders.s[j].name === id) {
					sliders.s[j].down = 0;
				}
			}
			if(!sendTimer) sendTimer = setInterval(sendToServer, 300); 
		}, false); 
	}
}

function wireCenter() {
	var sliderboxes = document.getElementsByClassName("slider");
	for (var i=0; i<sliderboxes.length; i++) {
		for (var j=0; j<sliders.s.length; j++) {
			if (sliders.s[j].name === sliderboxes[i].getAttribute("id")) {
				console.log(sliders.s[j].name); 
				sliderboxes[i].parentElement.getElementsByClassName("stop")[0].addEventListener("click", function(e) {
					var id = this.parentElement.getElementsByClassName("slider")[0].getAttribute("id");
					for (var j=0; j<sliders.s.length; j++) {
						if (sliders.s[j].name === id) {
							sliders.s[j].up = 0;
							sliders.s[j].down = 0;
							sliders.s[j].pos = sliders.s[j].def ;
						}
					}
				}, false); 
			}	
		}
	}
}

function wireStop() {
	var stop = document.getElementById("stopbutton");
	stop.addEventListener('click', function(e) { 
		crosscontrol.speed = 0.0;
		crosscontrol.angle = 0.0;
		crosscontrol.up = 0;
		crosscontrol.down = 0;
		crosscontrol.right = 0;
		crosscontrol.left = 0; 
		for (var j=0; j<sliders.s.length; j++) {
			if (sliders.s[j].name === "sliderm1" || sliders.s[j].name === "sliderm3") {
				sliders.s[j].pos = 0;
			}
		}
	}, false);
}

function wireOrientation() {
	window.addEventListener("orientationchange", function() {
		if (screen.orientation.angle < 45 && screen.orientation.angle > -45) {
			// portrait
			crosscontrol.speed = 0.0;
			crosscontrol.angle = 0.0;
			crosscontrol.up = 0;
			crosscontrol.down = 0;
			crosscontrol.right = 0;
			crosscontrol.left = 0; 
			for (var j=0; j<sliders.s.length; j++) {
				if (sliders.s[j].name === "sliderm1" || sliders.s[j].name === "sliderm3") {
					sliders.s[j].pos = 0;
				}
			}
			var show = [ "rotate" ];
			var unshow = [ "scrollme", "controlbox", "bottombox", "settingsbox" ];
			for (var i=0; i<unshow.length; i++) document.getElementById(unshow[i]).style.display = "none";
			for (var i=0; i<show.length; i++) document.getElementById(show[i]).style.display = "block";
		} else {
			// landscape
			var unshow = [ "rotate", "settingsbox" ];
			var show = [ "scrollme", "controlbox", "bottombox" ];
			for (var i=0; i<unshow.length; i++) document.getElementById(unshow[i]).style.display = "none";
			for (var i=0; i<show.length; i++) document.getElementById(show[i]).style.display = "block";
		}
	});
}

function countUp() {
	for (var j=0; j<sliders.s.length; j++) {
		var tbox = document.getElementById(sliders.s[j].name);
		if (sliders.s[j].up > 0) {
			sliders.s[j].pos += sliders.s[j].step;
			if (sliders.s[j].pos > sliders.s[j].end) { sliders.s[j].pos = sliders.s[j].end; }
			tbox.innerHTML =  sliders.s[j].text; // + " " + sliders.s[j].pos;
		}
		if (sliders.s[j].down > 0) {
			sliders.s[j].pos -= sliders.s[j].step;
			if (sliders.s[j].pos < sliders.s[j].start) { sliders.s[j].pos = sliders.s[j].start; }
			tbox.innerHTML =  sliders.s[j].text; //  + " " + sliders.s[j].pos;
		}
		var indi = tbox.parentElement.getElementsByClassName("sliderindicator")[0];
		indi.style.bottom = Math.round( (sliders.s[j].pos - sliders.s[j].start) / ( sliders.s[j].end - sliders.s[j].start) * 92.0 + 76.0 ) + "px";  
	}
	
}

function getPosCross() {
	var up = document.getElementById("buttonup");
	var down = document.getElementById("buttondown");
	var left = document.getElementById("buttonleft");
	var right = document.getElementById("buttonright");
	up.addEventListener('touchstart', function(e) { 
		e.preventDefault();
		crosscontrol.speed += crosscontrol.stepvertical;
		crosscontrol.up = 1;
		if (crosscontrol.speed > 1.0) { crosscontrol.speed = 1.0; }
		calculateCross();
		if(!crossTimer) crossTimer = setInterval(updateCross, 100); 
		if(!sendTimer) sendTimer = setInterval(sendToServer, 300); 
	}, false); 
	up.addEventListener('touchend', function(e) { 
		e.preventDefault();
		crosscontrol.up = 0;
		crosscontrol.down = 0;
		if(!sendTimer) sendTimer = setInterval(sendToServer, 300); 
		return false;
	}, false); 
	down.addEventListener('touchstart', function(e) { 
		e.preventDefault();
		crosscontrol.speed -= crosscontrol.stepvertical;
		crosscontrol.down = 1;
		if (crosscontrol.speed < -1.0) { crosscontrol.speed = -1.0; }
		calculateCross();
		if(!crossTimer) crossTimer = setInterval(updateCross, 100); 
		if(!sendTimer) sendTimer = setInterval(sendToServer, 300); 
	}, false); 
	down.addEventListener('touchend', function(e) { 
		e.preventDefault();
		crosscontrol.down = 0;
		crosscontrol.up = 0;
		if(!sendTimer) sendTimer = setInterval(sendToServer, 300); 
		return false;
	}, false); 
	right.addEventListener('touchstart', function(e) { 
		e.preventDefault();
		crosscontrol.angle += crosscontrol.stephorizontal;
		crosscontrol.right = 1;
		if (crosscontrol.angle > 1.0) { crosscontrol.angle = 1.0; }
		calculateCross();
		if(!crossTimer) crossTimer = setInterval(updateCross, 100); 
		if(!sendTimer) sendTimer = setInterval(sendToServer, 300); 
	}, false); 
	right.addEventListener('touchend', function(e) { 
		e.preventDefault();
		crosscontrol.right = 0;
		crosscontrol.left = 0;
		if(!sendTimer) sendTimer = setInterval(sendToServer, 300); 
		return false;
	}, false); 
	left.addEventListener('touchstart', function(e) { 
		e.preventDefault();
		crosscontrol.angle -= crosscontrol.stephorizontal;
		crosscontrol.left = 1;
		if (crosscontrol.angle < -1.0) { crosscontrol.angle = -1.0; }
		calculateCross();
		if(!crossTimer) crossTimer = setInterval(updateCross, 100); 
		if(!sendTimer) sendTimer = setInterval(sendToServer, 300); 
	}, false); 
	left.addEventListener('touchend', function(e) { 
		e.preventDefault();
		crosscontrol.left = 0;
		crosscontrol.right = 0;
		if(!sendTimer) sendTimer = setInterval(sendToServer, 300); 
		return false;
	}, false); 
}

function updateCross() {
	if (crosscontrol.up > 0) { crosscontrol.speed += crosscontrol.stepvertical; }
	if (crosscontrol.down > 0) { crosscontrol.speed -= crosscontrol.stepvertical; }
	if (crosscontrol.right > 0) { crosscontrol.angle += crosscontrol.stephorizontal; }
	if (crosscontrol.left > 0) { crosscontrol.angle -= crosscontrol.stephorizontal; }
	if (crosscontrol.speed < -1.0) { crosscontrol.speed = -1.0; }
	if (crosscontrol.speed > 1.0) { crosscontrol.speed = 1.0; }
	if (crosscontrol.angle < -1.0) { crosscontrol.angle = -1.0; }
	if (crosscontrol.angle > 1.0) { crosscontrol.angle = 1.0; }
	calculateCross();
}

function calculateCross() {
	if (document.getElementById("uisettings").getElementsByClassName("slidersonly")[0].checked) return false; 
	var speedM3 = 0.0;
	var speedM1 = 0.0;
	var posServo1 = 0.0;
	var dot = document.getElementById("directionindicator"); 
	var posX = 0;
	var posY = 0;
	if (crosscontrol.angle >= 0.0) {
		posY = Math.cos(crosscontrol.angle * Math.PI/2) * crosscontrol.speed * 40.0;
		if (crosscontrol.speed >= 0) {
		 	posX = Math.sin(crosscontrol.angle * Math.PI/2) * crosscontrol.speed * 40.0;
		} else {
			posX = -Math.sin(crosscontrol.angle * Math.PI/2) * crosscontrol.speed * 40.0;
		}
	} else {
		posY = Math.cos(-crosscontrol.angle * Math.PI/2) * crosscontrol.speed * 40.0;
		if (crosscontrol.speed >= 0) {
		 	posX = -Math.sin(-crosscontrol.angle * Math.PI/2) * crosscontrol.speed * 40.0;
		} else {
			posX = Math.sin(-crosscontrol.angle * Math.PI/2) * crosscontrol.speed * 40.0;
		}
	}
	if (joyStick === 'caterpillar') {
		if (crosscontrol.angle >= 0.0) {
			speedM3 = 255.0 * crosscontrol.speed;
			speedM1 = (255.0 - 510.0 * crosscontrol.angle) * crosscontrol.speed;
		} else {
			speedM3 = (255.0 + 510.0 * crosscontrol.angle) * crosscontrol.speed; 
			speedM1 = 255.0 * crosscontrol.speed;
		}
		sliders.s[2].pos = Math.round(speedM1);
		sliders.s[3].pos = Math.round(speedM3);
	} else {
		for (var j=0; j<sliders.s.length; j++) {
			if (sliders.s[j].name === "sliderm1") {
				speedM1 = Math.round(crosscontrol.speed * 255.0);
				sliders.s[j].pos = speedM1;
			} else if (sliders.s[j].name === "sliders1") {
				posServo1 = Math.round( (crosscontrol.angle + 1.0) * 90.0);
				sliders.s[j].pos = posServo1; 
			}
		} 
		sliders.s[2].pos = Math.round(speedM1);
		sliders.s[0].pos = Math.round(posServo1);
	}
	dot.style.bottom = Math.round(38.0 + posY) + "px";
	dot.style.left = Math.round(38.0 + posX) + "px";
	console.log("Direction: " + crosscontrol.angle + " Speed: " + crosscontrol.speed + " M3(L): " + speedM3 + " M1(R): " + speedM1 + " PosX: " + Math.round(posX) + " posY: " + Math.round(posY) + " Servo1: " + posServo1); 
}

function toggleInvert(n) {
	for (var j=0; j<sliders.s.length; j++) {
		if (sliders.s[j].name === n.getAttribute("class")) {
			if (n.checked) {
				sliders.s[j].invert = -1.0; 
				console.log("Inverted " + sliders.s[j].name);
			} else {
				sliders.s[j].invert = 1.0; 
				console.log("Not inverted " + sliders.s[j].name);
			}
		}
	}
}

function showJoyStick(type) { 
	var servoslider = document.getElementById("uisettings").getElementsByClassName("sliders1")[0];
	if (type === "car") {
		for (var j=0; j<sliders.s.length; j++) {
			// Do not show slider for Servo 1
			if (sliders.s[j].name === "sliders1") sliders.s[j].display = "none";
		}
		document.getElementById("sliders1").parentElement.style.display = "none";
		servoslider.checked = false;
		servoslider.disabled = true;
		// Move sliderm2 to the left box
		document.getElementById("slidersleft").appendChild(document.getElementById("sliderm2").parentElement);
		document.getElementById("slidersright").style.display = "none"; 
		document.getElementById("crosscontrols").style.display = "block"; 
	} else if (type === "caterpillar") {
		// Enable slider for Servo1
		servoslider.disabled = false;
		// Move sliderm2 to the left box
		document.getElementById("slidersleft").appendChild(document.getElementById("sliderm2").parentElement);
		document.getElementById("slidersright").style.display = "none"; 
		document.getElementById("crosscontrols").style.display = "block"; 
	} else {
		// Enable slider for Servo1
		servoslider.disabled = false;
		// Move sliderm2 to the right box
		document.getElementById("slidersright").insertBefore(document.getElementById("sliderm2").parentElement, document.getElementById("sliderm1").parentElement); 
		document.getElementById("slidersright").style.display = "block"; 
		document.getElementById("crosscontrols").style.display = "none"; 
	}
	joyStick = type; 
}

function toggleSliders(d) {
	var id = d.getAttribute("class"); 
	// console.log(id); 
	for (var j=0; j<sliders.s.length; j++) {
		// Do not show slider for Servo 1
		if (sliders.s[j].name ===  id) {
			if (d.checked) {
				document.getElementById(id).parentElement.style.display = "block";
				sliders.s[j].display = "block"; 
			} else {
				document.getElementById(id).parentElement.style.display = "none";
				sliders.s[j].display = "none"; 
			}
		}
	}
}

function updatelabel(d) {
	var id = d.getAttribute("class"); 
	console.log(id); 
	for (var j=0; j<sliders.s.length; j++) {
		// Do not show slider for Servo 1
		if (sliders.s[j].name ===  id) {
			document.getElementById(id).innerHTML = d.value;
			sliders.s[j].text = d.value; 
		}
	}
}

function drawGear() {
	var ctx = document.getElementsByClassName("gear")[0].getContext("2d");
ctx.fillStyle = 'green';
ctx.strokeStyle = 'black';
	var cx      = 42,                    // center x
    cy      = 42,                    // center y
    notches = 7,                      // num. of notches
    radiusO = 39,                    // outer radius
    radiusI = 27,                    // inner radius
    radiusH = 13,
    taperO  = 50,                     // outer taper %
    taperI  = 35,                     // inner taper %

    // pre-calculate values for loop

    pi2     = 2 * Math.PI,            // cache 2xPI (360deg)
    angle   = pi2 / (notches * 2),    // angle between notches
    taperAI = angle * taperI * 0.005, // inner taper offset (100% = half notch)
    taperAO = angle * taperO * 0.005, // outer taper offset
    a       = angle,                  // iterator (angle)
    toggle  = false;                  // notch radius level (i/o)
    
    // move to starting point
ctx.moveTo(cx + radiusO * Math.cos(taperAO), cy + radiusO * Math.sin(taperAO));

// loop
for (; a <= pi2; a += angle) {

    // draw inner to outer line
    if (toggle) {
        ctx.lineTo(cx + radiusI * Math.cos(a - taperAI),
                   cy + radiusI * Math.sin(a - taperAI));
        ctx.lineTo(cx + radiusO * Math.cos(a + taperAO),
                   cy + radiusO * Math.sin(a + taperAO));
    }

    // draw outer to inner line
    else {
        ctx.lineTo(cx + radiusO * Math.cos(a - taperAO),  // outer line
                   cy + radiusO * Math.sin(a - taperAO));
        ctx.lineTo(cx + radiusI * Math.cos(a + taperAI),  // inner line
                   cy + radiusI * Math.sin(a + taperAI));
    }

    // switch level
    toggle = !toggle;
}

// close the final line
ctx.closePath();
// without filling/stroking, continue with:

// Punch hole
ctx.moveTo(cx + radiusH, cy);
ctx.arc(cx, cy, radiusH, 0, pi2);

// now fill using even-odd rule
ctx.fillStyle = '#aaa';
ctx.fill("evenodd");

// stroke
ctx.lineWidth = 2;
ctx.strokeStyle = '#000';
ctx.stroke();

}

function sendToServer(){
	var json;
	var now = new Date().getTime();
	if(((now-lastSendTime) > transmitInterval) || (car.speed == 0)) {
		lastSendTime = now;
		var xmlHttp = new XMLHttpRequest();
		xmlHttp.onreadystatechange = function() {
			if(xmlHttp.readyState == 4 && xmlHttp.status == 200) {
				json = xmlHttp.responseText;
				readBack = JSON.parse(json);
			}
		};
		// url = /M/motorL/motorR
		var servo1 = sliders.s[0].pos
		var servo2 = sliders.s[1].pos
		if (sliders.s[0].invert < 0.0) { servo1 = 180.0 - sliders.s[0].pos; }
		if (sliders.s[1].invert < 0.0) { servo2 = 180.0 - sliders.s[1].pos; }
		var url = "/car/"+Math.round(sliders.s[2].pos * sliders.s[2].invert)+"/"+Math.round(sliders.s[3].pos * sliders.s[3].invert) + "/" + 
			Math.round(servo1) + "/" + Math.round(servo2) + "/" +
			Math.round(sliders.s[4].pos * sliders.s[4].invert)+"/"+Math.round(sliders.s[5].pos * sliders.s[5].invert) + "/" +
			"0" + "/"+Math.round(sliders.s[6].pos * sliders.s[6].invert); 
		xmlHttp.open("GET", url, true);
		xmlHttp.send(null);
	}
}

	</script>
</head>
<body onLoad="wireTouch();">
	<div id="rotate">
		<div class="inner"><!-- Welcome to Eitech Robotics!<br /><br />Please switch to landscape mode.--></div>
	</div>
	<div id="scrollme">
		<div class="inner"><!-- Welcome to Eitech Robotics!<br /><br />Scroll down until the controls stay fixed.--></div>
		<div id="opensettings"><canvas class="gear" width="84" height="84" /></div>
		<div id="iconeitech">
		<a href="https://www.eitech.de/marken-und-produkte/eitech/die-marke/" target="_blank"><img alt="Eitech Logo" src="data:image/png;base64,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" /></a>
	</div>
	</div>
	<div id="controlbox">
		<div id="slidersleft">
			<div class="sliderbox">
				<div class="arrowupbox"><canvas class="arrowup" width="84" height="80" /></div>
				<div class="slider" id="sliders1">Servo L</div>
				<div class="arrowdownbox"><canvas class="arrowdown" width="84" height="80" /></div>
				<div class="sliderindicator"></div>
				<div class="stop"></div>
			</div>
			<div class="sliderbox">
				<div class="arrowupbox"><canvas class="arrowup" width="84" height="80" /></div>
				<div class="slider" id="sliders2">Servo R</div>
				<div class="arrowdownbox"><canvas class="arrowdown" width="84" height="80" /></div>
				<div class="sliderindicator"></div>
				<div class="stop"></div>
			</div>
			<div class="sliderbox">
				<div class="arrowupbox"><canvas class="arrowup" width="84" height="80" /></div>
				<div class="slider" id="slidersw1">Switch 1</div>
				<div class="arrowdownbox"><canvas class="arrowdown" width="84" height="80" /></div>
				<div class="sliderindicator"></div>
				<div class="stop"></div>
			</div>
			<div class="sliderbox">
				<div class="arrowupbox"><canvas class="arrowup" width="84" height="80" /></div>
				<div class="slider" id="sliderm4">Motor 4</div>
				<div class="arrowdownbox"><canvas class="arrowdown" width="84" height="80" /></div>
				<div class="sliderindicator"></div>
				<div class="stop"></div>
			</div>
			<div class="sliderbox">
				<div class="arrowupbox"><canvas class="arrowup" width="84" height="80" /></div>
				<div class="slider" id="sliderm2">Motor 2</div>
				<div class="arrowdownbox"><canvas class="arrowdown" width="84" height="80" /></div>
				<div class="sliderindicator"></div>
				<div class="stop"></div>
			</div>
		</div>
		<div id="slidersright">
			<div class="sliderbox">
				<div class="arrowupbox"><canvas class="arrowup" width="84" height="80" /></div>
				<div class="slider" id="sliderm1">Motor 1</div>
				<div class="arrowdownbox"><canvas class="arrowdown" width="84" height="80" /></div>
				<div class="sliderindicator"></div>
				<div class="stop"></div>
			</div>
			<div class="sliderbox">
				<div class="arrowupbox"><canvas class="arrowup" width="84" height="80" /></div>
				<div class="slider" id="sliderm3">Motor 3</div>
				<div class="arrowdownbox"><canvas class="arrowdown" width="84" height="80" /></div>
				<div class="sliderindicator"></div>
				<div class="stop"></div>
			</div>
		</div>
		<div id="crosscontrols">
			<div id="buttonup"><canvas class="arrowup" width="84" height="80" /></div>
			<div id="buttondown"><canvas class="arrowdown" width="84" height="80" /></div>
			<div id="centerpanel"><canvas id="drawjoystick" width="84" height="84" /></div>
			<div id="directionpanel"><div id="directionindicator"></div></div>
			<div id="stopbutton">STOP</div>
			<div id="buttonleft"><canvas class="arrowleft" width="80" height="84" /></div>
			<div id="buttonright"><canvas class="arrowright" width="80" height="84" /></div>
		</div>
	</div>
	<div id ="bottombox">
	</div>
	<div id="settingsbox">
		<div class="closecontainer"><canvas class="closeicon" width="84" height="84" /></div>
		<div class="safecontainer"><canvas class="diskette" width="84" height="84" /></div>
		<h3>Settings</h3>
			<form>
				<div class="groupfields">
				<fieldset id="invertsettings">
					<legend>About</legend>
					<table>
						<tr>
							<td>Program name:</td><td>Eitech Robotics Flex v1.0</td>
						</tr>
						<tr>
							<td>Program build:</td><td>Nov 17 2018 12:22:19</td>
						</tr>
						<tr>
							<td>WiFi firmware:</td><td>19.5.4</td>
						</tr>
					</table>
				</fieldset>
				<fieldset id="invertsettings">
					<legend>Direction of servos and motors</legend>
					<input type="checkbox" onClick="toggleInvert(this);" id="invertml" class="sliderm1">Invert motor M1 (right)</input><br />
					<input type="checkbox" onClick="toggleInvert(this);" id="invertmr" class="sliderm3">Invert motor M3 (left)</input><br />
					<input type="checkbox" onClick="toggleInvert(this);" id="invertm4" class="sliderm4">Invert motor M4</input><br />
					<input type="checkbox" onClick="toggleInvert(this);" id="invertm2" class="sliderm2">Invert motor M2 (no PWM!)</input><br />
					<input type="checkbox" onClick="toggleInvert(this);" id="inverts1" class="sliders1">Invert servo L</input><br />
					<input type="checkbox" onClick="toggleInvert(this);" id="inverts2" class="sliders2">Invert servo R</input>
				</fieldset>
				<fieldset id="uisettings">
					<legend>User interface</legend>
					<input type="radio" name="joystick" onClick="showJoyStick('caterpillar');" checked>Show joystick (M1 and M3)</input><br />
					<input type="radio" name="joystick" onClick="showJoyStick('car');">Show joystick (M1 and servo 1)</input><br />
					<input type="radio" name="joystick" onClick="showJoyStick('sliders');" class="slidersonly">Show two sliders</input><br />
					<input type="checkbox" onClick="toggleSliders(this);" class="sliderm1" checked>Show slider M1</input><br />
					<input type="checkbox" onClick="toggleSliders(this);" class="sliderm3" checked>Show slider M3</input><br />
					<input type="checkbox" onClick="toggleSliders(this);" class="sliderm4">Show slider M4</input><br />
					<input type="checkbox" onClick="toggleSliders(this);" class="sliderm2">Show slider M2 (no PWM!)</input><br />
					<input type="checkbox" onClick="toggleSliders(this);" class="slidersw1" checked>Show slider S1</input><br />
					<input type="checkbox" onClick="toggleSliders(this);" class="sliders1" checked>Show slider servo 1</input><br />
					<input type="checkbox" onClick="toggleSliders(this);" class="sliders2" checked>Show slider servo 2</input>
				</fieldset>
				</div>
				<div class="groupfields">
				<fieldset>
					<legend>Behaviour of S1 slider</legend>
					<input type="radio" name="s1behaviour" checked>Linear modulation</input><br />
					<input type="radio" name="s1behaviour">On/off</input><br />
					<input type="radio" name="s1behaviour">Sinus wave (rotating beacon)</input><br />
					<input type="radio" name="s1behaviour">Hard flash</input>
				</fieldset>
				<fieldset>
					<legend>Language</legend>
					<select name="language">
						<option value="de">Deutsch</option>
						<option value="en" selected>English</option>
						<option value="es">Espa&ntilde;ol</option>
						<option value="fr">Fran&ccedil;ais</option>
					</select>
				</fieldset>
				<fieldset>
					<legend>Labels for sliders</legend>
					<input type="text" size="26" value="Servo L" class="sliders1" onInput="updatelabel(this);"></input><br />
					<input type="text" size="26" value="Servo R" class="sliders2" onInput="updatelabel(this);"></input><br />
					<input type="text" size="26" value="Motor 1" class="sliderm1" onInput="updatelabel(this);"></input><br />
					<input type="text" size="26" value="Motor 2" class="sliderm2" onInput="updatelabel(this);"></input><br />
					<input type="text" size="26" value="Motor 3" class="sliderm3" onInput="updatelabel(this);"></input><br />
					<input type="text" size="26" value="Motor 4" class="sliderm4" onInput="updatelabel(this);"></input><br />
					<input type="text" size="26" value="Switch 1" class="slidersw1" onInput="updatelabel(this);"></input><br />
					<input type="button" value="Reset to defaults of selected language" />
				</fieldset>
				<fieldset>
					<legend>Network</legend>
					<table>
						<tr>
							<td colspan="2"><input type="radio" name="netmode" checked>Provide access point</input></td>
						</tr>
						<tr>
							<td>Name:</td><td><input type="text" size="20" value="eitech-robotics" /></td>
						</tr>
						<tr>
							<td>WPA2 key:</td><td><input type="text" size="20" value="" /></td>
						</tr>
						<tr>
							<td colspan="2"><input type="radio" name="netmode">WiFi client</input></td>
						</tr>
						<tr>
							<td>ESSID:</td><td><input type="text" size="20" value="" /></td>
						</tr>
						<tr>
							<td>WPA(2) key:</td><td><input type="text" size="20" value="" /></td>
						</tr>
					</table>
				</fieldset>
				</div>
			</form>
	</div>
</body>
	